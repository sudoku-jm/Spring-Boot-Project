<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layouts/main_template}">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>
<body>
	<div layout:fragment="content">

		<div class="profile_wrap pdb60 clfix">
		
			<div class="profile_view clfix">
				
				<div class="profile_box">
					<div class="img_frame">
						<img id="profile" th:src="@{/image/no_img.png}" alt="">
					</div>
				</div>
				<div class="upload_box">
					<h3>파일명</h3>
					<p>(0.00MB)</p>
					<a href="">삭제</a>
					<form id="uploadForm" th:action="@{/file/profileUpload}" method="post" enctype="multipart/form-data">
						<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
						<input type="hidden" name="userNo" th:value="${member.userNo}" />
						<label class="upload_label btn btn_submit" for="fileupload">업로드</label>
						<input id="profile" type="file" name="profile" class="upload_input" /> 
					</form>
				</div>
			</div>
			
			<div class="profile_list">
				<ul class="clfix">
					<li>
						<div class="profile_past">
							<a href="javascript:;" title="" class="delete_profile">x</a>
							<div class="img">
								<img src="../image/no_img.png" alt="">
							</div>
							<div class="radio_box">
			                   <input type="radio" name="" id="" value="3">
			                   <label for=""></label>
			                 </div>
						</div>
					</li>

					
				</ul>
			</div>
			
			<div class="txtr">
				<a href="javascript:;" title="" class="btn btn_submit mrt10" id="btnUpdateProfile">프로필 변경</a>
			</div>


		</div>
		<!--//profile_wrap  -->
		
		<form id="profileForm" th:action="@{change}" method="post">
		
			<div class="join_wrap" th:object="${member}">
					<table>
						<colgroup>
							<col style="width: 20%">
							<col style="width: auto">
						</colgroup>
						<tr>
							<th>아이디</th>
							<td><input type="text" name="userId" th:field="*{userId}" /></td>
						</tr>
						<tr>
							<th>비밀번호</th>
							<td>
	<!-- 							<input type="password" name="userPw" th:field="*{userPw}" /> -->
								<button type="button" class="btn btn_submit" onclick="openPopup();">비밀번호 변경</button>
							</td>
						</tr>
						<tr>
							<th>사용자명</th>
							<td><input type="text" name="userName" th:field="*{userName}" /></td>
						</tr>
						<tr>
							<th>이메일</th>
							<td><input type="email" name="email"  /></td>
						</tr>
						<tr>
							<th>홈페이지</th>
							<td><input type="text" name="page"  /></td>
						</tr>
					</table>
	
				<div class="btn_box">
					<button type="submit" id="btnRegister" class="btn btn_submit">등록</button>
	
					<th:block sec:authorize="hasRole('ROLE_ADMIN')">
						<button type="submit" id="btnList" class="btn btn_black">목록</button>
					</th:block>
				</div>
			</div>
		</form>


	<script>
		
		$(function(){
			
			var uploadForm = $('#uploadForm');
			var profileForm = $('#profileForm');
			
			
			//프로필 변경 버튼 클릭 이벤트
			$('#btnUpdateProfile').on('click',function(){
				uploadForm.submit();
			});		
			
		});
		
		
	
		function openPopup() {
			let width = 500;
            let height = 600;
            let top = (window.innerHeight - height) / 2 + screenY;
            let left = (window.innerWidth - width) / 2 + screenX;

            let spec = 'status=no, menubar=no, toolbar=no, resizable=no';
            spec += ', width=' + width + ', height=' + height;
            spec += ', top=' + top + ', left=' + left;

	        window.open('/user/check/passCheck', 'popup', spec);
			
		}
	
	</script>
	</div>
</body>
</html>
